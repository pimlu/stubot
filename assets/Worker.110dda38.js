!function(){"use strict";let t,e=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});e.decode();let n=null;function r(){return null!==n&&n.buffer===t.memory.buffer||(n=new Uint8Array(t.memory.buffer)),n}function s(t,n){return e.decode(r().subarray(t,t+n))}let a=0,o=new TextEncoder("utf-8");const _="function"==typeof o.encodeInto?function(t,e){return o.encodeInto(t,e)}:function(t,e){const n=o.encode(t);return e.set(n),{read:t.length,written:n.length}};function i(t,e,n){if(void 0===n){const n=o.encode(t),s=e(n.length);return r().subarray(s,s+n.length).set(n),a=n.length,s}let s=t.length,i=e(s);const c=r();let w=0;for(;w<s;w++){const e=t.charCodeAt(w);if(e>127)break;c[i+w]=e}if(w!==s){0!==w&&(t=t.slice(w)),i=n(i,s,s=w+3*t.length);const e=r().subarray(i+w,i+s);w+=_(t,e).written}return a=w,i}let c=null;function w(){return null!==c&&c.buffer===t.memory.buffer||(c=new Int32Array(t.memory.buffer)),c}class u{static __wrap(t){const e=Object.create(u.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const e=this.__destroy_into_raw();t.__wbg_searchresult_free(e)}get score(){return t.__wbg_get_searchresult_score(this.ptr)}set score(e){t.__wbg_set_searchresult_score(this.ptr,e)}get mv(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.searchresult_mv(r,this.ptr);var e=w()[r/4+0],n=w()[r/4+1];let a;return 0!==e&&(a=s(e,n).slice(),t.__wbindgen_free(e,1*n)),a}finally{t.__wbindgen_add_to_stack_pointer(16)}}}class f{static __wrap(t){const e=Object.create(f.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const e=this.__destroy_into_raw();t.__wbg_wasmsearcher_free(e)}constructor(){var e=t.wasmsearcher_new();return f.__wrap(e)}search(e,n){!function(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);t.ptr}(e,l);var r=e.ptr;e.ptr=0;var s=t.wasmsearcher_search(this.ptr,r,n);return u.__wrap(s)}get nodes(){return t.wasmsearcher_nodes(this.ptr)}}class l{static __wrap(t){const e=Object.create(l.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const e=this.__destroy_into_raw();t.__wbg_wasmstate_free(e)}constructor(e){var n=null==e?0:i(e,t.__wbindgen_malloc,t.__wbindgen_realloc),r=a,s=t.wasmstate_new(n,r);return l.__wrap(s)}toString(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.wasmstate_toString(r,this.ptr);var e=w()[r/4+0],n=w()[r/4+1];return s(e,n)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,n)}}moveGen(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.wasmstate_moveGen(r,this.ptr);var e=w()[r/4+0],n=w()[r/4+1];return s(e,n)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,n)}}makeMove(e){var n=i(e,t.__wbindgen_malloc,t.__wbindgen_realloc),r=a;t.wasmstate_makeMove(this.ptr,n,r)}score(){return t.wasmstate_score(this.ptr)}boardString(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.wasmstate_boardString(r,this.ptr);var e=w()[r/4+0],n=w()[r/4+1];return s(e,n)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,n)}}isWhite(){return 0!==t.wasmstate_isWhite(this.ptr)}}async function d(e){void 0===e&&(e=new URL("./assets/stubot_wasm_bg.0f1804cc.wasm",window.location));const n={wbg:{}};n.wbg.__wbindgen_throw=function(t,e){throw new Error(s(t,e))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:a}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(n){if("application/wasm"==t.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await t.arrayBuffer();return await WebAssembly.instantiate(r,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await e,n);return t=r.exports,d.__wbindgen_wasm_module=a,t.__wbindgen_start(),t}let p,b;const m=new Promise(((t,e)=>{p=t,b=e}));const h=(async function(){let t="./assets/stubot_wasm_bg.0f1804cc.wasm";void 0===self.document&&(t=t.replace("./assets",".")),await d(new URL(t,`${self.location}`))}().then(p).catch(b),m);onmessage=t=>{!async function({fen:t,depth:e}){await h;const n=new f,{score:r,mv:s}=n.search(new l(t),e),{nodes:a}=n;postMessage({score:r,mv:s,nodes:a})}(t.data)}}();
